<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>tiny_bytecode — README</title>
<style>
body{font-family:system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; max-width:900px; margin:40px auto; padding:0 20px; line-height:1.6}
pre{background:#f6f8fa;padding:12px;border-radius:6px;overflow:auto}
code{background:#f6f8fa;padding:2px 4px;border-radius:4px}
</style>
</head>
<body>
<article>
<h1 id="vm-operationen-in-tbc-tiny-bytecode">VM Operationen in TBC (tiny bytecode)</h1>
<p>"Die 17 Grundoperationen der virtuellen Maschine, das Kommentarzeichen (#) und sowie die optionale Vorlauf-Logik zum Entfernen von Leerzeichen und Kommentaren werden hier dokumentiert."</p>
<p><strong>Operationen</strong>:</p>
<ol>
<li><code>+</code>    : Addition</li>
<li><code>-</code>    : Subtraktion</li>
<li><code>*</code>    : Verdoppeln (×2, Bitshift left)</li>
<li><code>/</code>    : Halbieren (÷2, Bitshift right)</li>
<li><code>@</code>    : Dereferenzieren (read)</li>
<li><code>!</code>    : Schreiben (write)</li>
<li><code>&amp;</code>    : "Jump Subroutine" – legt Rücksprung-Adresse auf den Return-Stack</li>
<li><code>;</code>    : "Return from Subroutine"</li>
<li><code>&gt;</code>    : Wert von Data-Stack auf Return-Stack</li>
<li><code>&lt;</code>   : Wert von Return-Stack auf Data-Stack</li>
<li><code>?</code>   : Conditional Jump – springt zu in Variable gespeicherter Adresse, falls Wert auf Stack &gt; 0</li>
<li><code>$x</code>  : Legt Adresse vom nächsten Label <code>:x</code> auf den Stack</li>
<li><code>:x</code>  : Definiert ein Label <code>x</code></li>
<li><code>.</code>   : Pop Wert von Data-Stack und schreibe das Zeichen (ASCII) des (Wert &amp; 0xFF) auf stdout</li>
<li><code>,</code>   : Lese ein Zeichen von stdin und lege dessen Byte-Wert (0-255) auf den Data-Stack; bei EOF wird -1 gelegt</li>
<li><code>^</code>   : Halt — beendet die VM sofort, sobald dieses Opcode ausgeführt wird</li>
<li><code>#</code>   : Kommentar – alles nach <code>#</code> bis Zeilenende wird ignoriert</li>
</ol>
<p><strong>Parser/Vorlauf</strong>:
- Vor der Interpretation können <strong>Kommentare</strong> und <strong>Leerzeichen</strong> entfernt werden.
- Kommentare starten mit <code>#</code> und gehen bis zum Ende der aktuellen Zeile.
- Leerzeichen sind für die Ausführung nicht relevant.
- Eine naive Implementation des Bytecode-Interpreters - z.B. in Maschinencode - kann den Vorlauf auch auslassen.</p>
<hr />
<p><strong>Motivation:</strong>
Die VM soll möglichst simpel gehalten werden, damit sie ohne Assembler direkt in Maschinensprache umgesetzt werden kann. Dies betrifft insbesondere die Operationen und das Parsing.</p>
<p><strong>Tasks:</strong>
- Dokumentation der 13+1 Operationen und des Parsing-Vorlaufs im Repository.
- Beispielimplementierung für den Vorlauf (Entfernen von Leerzeichen und Kommentaren).
- Kommentare im Code entsprechend auszeichnen.</p>
<p><strong>Optional:</strong> Vorschläge für die Erweiterbarkeit oder Implementierung können in den Kommentaren ergänzt werden.</p>
</article>
</body>
</html>